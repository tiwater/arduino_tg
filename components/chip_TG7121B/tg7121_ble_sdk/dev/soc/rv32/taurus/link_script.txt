MEMORY
{
    FLASH (rx) : ORIGIN = 0x800000, LENGTH = 0x80000
    RAM (rwx) : ORIGIN = 0x400000, LENGTH = 0xd000
}
ENTRY(Reset_Handler)
SECTIONS
{
    .text_ram :
    {
        *(.text.Reset_Handler)
        *(.text.SystemInit)
        *(.text.qspi_flash_io_init)
        *(.text.pll_enable)
        *(.text.exception_entry)        
		KEEP(*(.init))
		KEEP(*(.fini))
        *(STACK_CODE_RAM)

    }>RAM
	.text :
	{
        LONG(0xa5a53c3c)

		*crtbegin.o(.ctors)
		*crtbegin?.o(.ctors)
		*(EXCLUDE_FILE(*crtend?.o *crtend.o) .ctors)
		*(SORT(.ctors.*))
		*(.ctors)


		*crtbegin.o(.dtors)
		*crtbegin?.o(.dtors)
		*(EXCLUDE_FILE(*crtend?.o *crtend.o) .dtors)
		*(SORT(.dtors.*))
		*(.dtors)

		*(.eh_frame*)
		*(.text* .srodata* .rodata*)
		. = ALIGN(4);
	}>FLASH
    __data_lma__ = .;
	.data :
	{
        *(.text.cpu_recover_asm)
        *(.sdata*)
		*(.data*)
		*(.xip_banned)
		*(vtable)
		__data_start__ = .;
		__data_end__ = ALIGN(4);
        _edata = __data_end__;
	}>RAM

	.bss (NOLOAD):
	{
		__bss_start__ = .;
        *(.sbss*)
		*(.bss*)
		*(SECTION_RTT)
		__bss_end__ = ALIGN(4);
        PROVIDE(_end = .);
		PROVIDE(end = .);
	}>RAM

	__StackTop = ORIGIN(RAM) + LENGTH(RAM);
	PROVIDE(__global_pointer$ = __bss_start__ + (4K / 2) );	
}
